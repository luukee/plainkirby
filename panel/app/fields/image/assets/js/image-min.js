!function($){$.fn.imagefield=function(){return this.each(function(){var e=$(this);if(e.data("imagefield"))return!0;e.data("imagefield",!0);var a=e.find("select"),t=e.find(".input-preview figure"),i=t.parent("a");a.on("keydown change",function(){var e=a.find("option:selected"),n=e.data("url"),r=e.data("thumb");""===e.val()&&(n="#"),r?t.attr("style","background-image: url("+r+")"):t.attr("style","background-image: none"),i.attr("href",n)}).trigger("change"),e.find(".input-preview").on("click",function(){if("#"==$(this).attr("href"))return!1}),e.find(".input").droppable({hoverClass:"over",accept:$(".sidebar .draggable-file"),drop:function(e,a){$(this).find("select").val(a.draggable.data("helper")).trigger("change")}})})}}(jQuery);